<ion-header>
  <ion-toolbar>
    <ion-title>Ajout d'abonnement</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <form (ngSubmit)="onSubmit()">
    <ion-list>
      <ion-item>
        <ion-input
          label="Rechercher une entreprise :"
          [(ngModel)]="inputModel"
          [ngModelOptions]="{ standalone: true }"
          (ionInput)="onInput($event)"
          #ionInputEl
        ></ion-input>
      </ion-item>
      @if (filteredOptions.length > 0) {
        @for (option of filteredOptions; track option) {
          <ion-item (click)="selectOption(option)">
            <ion-avatar slot="start">
              <img [src]="option.logo" alt="{{ option.name }} logo" />
            </ion-avatar>
            <ion-label>{{ option.name }}</ion-label>
          </ion-item>
        }
      }
      <ion-item>  
        <ion-input label="Prix :" type="number" placeholder="" [(ngModel)]="price" name="price"></ion-input>
      </ion-item>
      <ion-item>
        <ion-select label="CatÃ©gorie :" [(ngModel)]="selectedCategory" name="selectedCategory">
          @for (category of subscriptionCategories; track category)
          {
            <ion-select-option value="{{ category }}">{{ category }}</ion-select-option>
          }
        </ion-select>
      </ion-item>
      <ion-item class="ion-margin-horizontal">
        <ion-label position="stacked" class="ion-padding-bottom">Prochain paiement</ion-label>
        <ion-datetime presentation="date" [(ngModel)]="nextPaymentDate" name="nextPaymentDate"></ion-datetime>
      </ion-item>
    </ion-list>
    <ion-button id="open-loading" expand="block" type="submit">Valider</ion-button>
    <ion-loading trigger="open-loading" message="Enregistrement..." duration="3000"></ion-loading>
  </form>
</ion-content>
